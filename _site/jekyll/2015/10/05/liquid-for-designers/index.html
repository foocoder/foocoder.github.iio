<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>

Liquid for Designers | Meta Coder

</title>
<meta name="description" content=" Reading, Thinking, Coding">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed.xml">
<!-- include Font Awesome -->
<link rel="stylesheet" href="/font_awesome/css/font-awesome.min.css" >
<!-- include Font Awesome -->
<!-- icons -->
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<meta name="theme-color" content="#00f0ff">
<meta name="msapplication-TileColor" content="#00f0ff">
<meta name="msapplication-TileImage" content="/mstile-310x310.png">
<!-- /icons -->
<!-- og tags -->
<meta property="og:site_name" content="Meta Coder">
<meta property="og:title" content="Liquid for Designers • Meta Coder">
<meta property="og:locale" content="en">

  
    <meta property="og:image" content="http://foocoder.github.io/img/9.jpg">
  

<meta property="og:type" content="website">
<meta property="og:url" content="http://foocoder.github.io/jekyll/2015/10/05/liquid-for-designers/">
<meta property="og:description" content="

Reading, Thinking, Coding
">
<!-- /og tags -->
<script src="/js/jquery-2.1.4.min.js"></script>
<script src="/js/modernizr.js"></script>
<script src="/js/fitvids.js"></script>
<script>
$("#back-top").hide();
$(document).ready(function () {
  $(window).scroll(function () {
    if ($(this).scrollTop() > 100) {
      $('#back-top').fadeIn();
    } else {
      $('#back-top').fadeOut();
    }
  });
  $('#back-top a').click(function () {
    $('body,html').animate({
      scrollTop: 0
    }, 800);
    return false;
  });
});
</script>
<link href='//fonts.useso.com/css?family=Source+Code+Pro:400,700|Source+Sans+Pro:600,900|Open+Sans:400,600' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/reset.css">
<link rel="stylesheet" href="/css/pygments.css">

    <link rel="stylesheet" href="/font_awesome/css/font-awesome.min.css">

<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="/css/style.css">
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]-->

<style>
header {
  margin-bottom: 40px;
}
@media all and (min-width: 500px) {
  header {
    margin-bottom: 100px;
  }
}
header::after {
  display: none;
}
</style>


    </head>
    <body>
        
        <div class="cover-image-container">
            <img alt="Cover image" src="/img/covers/9.jpg" style="width:100%">
        </div>
        
        
        <div id="back-top" style="display:none">
          <a href="#top" title="回到顶部">
              <span class="fa fa-stack fa-lg">
                  <i class="fa fa-square fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-arrow-up fa-inverse"></i>
              </span>
          </a>
        </div>
        
        <header class="intro-header-container" style="background-image: url('/img/covers/9.jpg'); background-size:cover">
  <div class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 ">
                <div class="site-heading">
                    
                </div>
            </div>
        </div>
    </div>
  </div>
</header>
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Meta Code</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="huxblog_navbar" class=" ">
            <div class="navbar-collapse" style="height: 0px;">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/about/">ABOUT</a>
                    </li>
                    <li>
                        <a href="/archive/">ARCHIVE</a>
                    </li>
                    <li>
                        <a href="/category/">CATEGORY</a>
                    </li>
                    <li>
                        <a href="/tags/">TAGS</a>
                    </li>
                    <li>
                        <a href="/reading/">BOOK</a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>


        <div class="wrap">
            


<article>
        <h1>Liquid for Designers</h1>
        <div class="category">
            
                <a class="fa fa-coffee" style="font-size:large" href="/category/#Jekyll" title="Jekyll"> Jekyll</a>
            
        </div>
        <div class="tags">
            
            <a class="fa fa-thumb-tack" style="font-size:large" href="/tags/#转载" title="转载">  转载</a>
            
            <a class="fa fa-thumb-tack" style="font-size:large" href="/tags/#译文" title="译文">  译文</a>
            
            <a class="fa fa-thumb-tack" style="font-size:large" href="/tags/#Liquid" title="Liquid">  Liquid</a>
            
            <a class="fa fa-thumb-tack" style="font-size:large" href="/tags/#不时之需" title="不时之需">  不时之需</a>
            
        </div>
        <div class="times">
            <span class="fa fa-calendar"style="font-size:large" > Oct 5, 2015 • 11&nbsp;min read</span>
        </div>

        <hr>
        <p>这两天在用jekyll搭博客,一看是liquid语言立刻傻眼了!</p>

<p>话说Liquid是个什么鬼?</p>

<p>不过好在Github上有<a href="http://github.com/Shopify/liquid/wiki/Liquid-for-Designers">文档</a>, 但是可惜是英语的.虽说作为一个Code Monkey来说,英语应该作为第二母语来使用,但我还是尽我所能的去寻找第一母语吧.</p>

<p>功夫不负有心人,让我找到了 <a href="http://havee.me">@Havee</a>的这篇<a href="http://havee.me/internet/2013-11/jekyll-liquid-designer.html">Jekyll扩展的Liquid设计</a>,虽然这篇也是转自<a href="http://yanshasha.com/2013/01/22/Liquid-for-designers/">http://yanshasha.com/2013/01/22/Liquid-for-designers/</a>,不过可惜原文已挂,为了防止这么好的母语翻译文档继续挂掉,so,我还是转过来吧,以备不时之需.</p>

<blockquote>
  <center>原文:Jekyll扩展的Liquid设计</center>
</blockquote>

<p>在Liquid中有两种类型的标记:<code class="highlighter-rouge">Output</code>和<code class="highlighter-rouge">Tag</code>.</p>

<ul>
  <li><code class="highlighter-rouge">Output</code>标记(有些可能解析文本)被包含在:</li>
</ul>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{{</span><span class="w"> </span><span class="err">两个配对的花括号中</span><span class="w"> </span><span class="p">}}</span></code></pre></figure>

<ul>
  <li><code class="highlighter-rouge">Tag</code>标记(不能被解析文本)被包含在:</li>
</ul>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">成对的花括号和百分号中</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<h2 id="output">Output</h2>
<hr />
<p>下面是关于输出标记的简单实例:</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">Hello <span class="p">{{</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">}}</span>
Hello <span class="p">{{</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="p">}}</span>
Hello <span class="p">{{</span><span class="w"> </span><span class="s1">'tobi'</span><span class="w"> </span><span class="p">}}</span></code></pre></figure>

<h3 id="section">高级输入:过滤器</h3>
<p>输入标记带有过滤器,方法很简单.第一个参数总是过滤器左边值的输出.当下个过滤器运行时,刚刚所得到的过滤器的返回值就会成为新的左边值.知道最后没有过滤器时,模板就会接受最后的结果字符串.</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">Hello <span class="p">{{</span><span class="w"> </span><span class="s1">'tobi'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">upcase</span><span class="w"> </span><span class="p">}}</span>
Hello tobi has <span class="p">{{</span><span class="w"> </span><span class="s1">'tobi'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">size</span><span class="w"> </span><span class="p">}}</span> letters
Hello <span class="p">{{</span><span class="w"> </span><span class="s1">'tobi'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">capitalize</span><span class="w"> </span><span class="p">}}</span>
Hello <span class="p">{{</span><span class="w"> </span><span class="s1">'1982-02-01'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">date</span><span class="p">:</span><span class="s2">"%Y"</span><span class="w"> </span><span class="p">}}</span></code></pre></figure>

<p>输出的结果是:</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">Hello TOBI
Hello tobi has 4 letters
Hello Tobi
Hello 1982</code></pre></figure>

<h3 id="section-1">标准过滤器</h3>

<ul>
  <li><code class="highlighter-rouge">data</code> - 格式化日期</li>
  <li><code class="highlighter-rouge">capitalize</code> - 将输入语句的首字母大写</li>
  <li><code class="highlighter-rouge">downcase</code> - 将输入字符串转为小写</li>
  <li><code class="highlighter-rouge">upcase</code> - 将输入字符串转为大写</li>
  <li><code class="highlighter-rouge">first</code> - 获取传递数组的第一个元素</li>
  <li><code class="highlighter-rouge">last</code> - 获取传递数组的最后一个元素</li>
  <li><code class="highlighter-rouge">join</code> - 将数组中元素连成一串,中间通过某些字符分隔</li>
  <li><code class="highlighter-rouge">sort</code> - 对数组元素进行排序</li>
  <li><code class="highlighter-rouge">map</code> - 从一个给定属性中映射/收集一个数组</li>
  <li><code class="highlighter-rouge">size</code> - 返回一个数组或字符串的大小</li>
  <li><code class="highlighter-rouge">escape</code> - 对一串字符串进行编码</li>
  <li><code class="highlighter-rouge">escape_once</code> - 返回一个转义的html版本,而不影响现有的转义文本</li>
  <li><code class="highlighter-rouge">strip_html</code> - 去除一串字符串中的所有html标签</li>
  <li><code class="highlighter-rouge">strip_newlines</code> - 从字符串中去除所有换行符(\n)</li>
  <li><code class="highlighter-rouge">newline_to_br</code> - 将所有的换行符(\n)换成html的换行标记</li>
  <li><code class="highlighter-rouge">replace</code> - 替换每一处匹配字符串,如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'foofoo'|replace:'foo','bar'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">barbar</code></li>
  <li><code class="highlighter-rouge">replace_first</code> - 替换第一处匹配字符串,如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'barbar'|replace_first:'bar','foo'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">foobar</code></li>
  <li><code class="highlighter-rouge">remove</code> - 删除每一处匹配的字符串,如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'foobarfoobar'|remove:'foo'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">barbar</code></li>
  <li><code class="highlighter-rouge">remove_first</code> - 删除第一处匹配的字符串，如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'barbar'|remove_first:'bar'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">bar</code></li>
  <li><code class="highlighter-rouge">truncate</code> - 将一串字符串截断其前x个字符,而且，也可以在第二个参数上来为其追加字符，如: <code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'foobarfoobar'|truncate:5,'.'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">foob.</code></li>
  <li><code class="highlighter-rouge">truncatewords</code> - 将一串字符串截断其前x个单词</li>
  <li><code class="highlighter-rouge">prepend</code> - 在一串字符串前添加指定字符串,如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'bar'|prepend:'foo'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">foobar</code></li>
  <li><code class="highlighter-rouge">append</code> - 在一串字符串后添加指定字符串，如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'foo'|append:'bar'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">foobar</code></li>
  <li><code class="highlighter-rouge">slice</code> - 切割字符串，需要输入切割位置以及切割长度(暂不支持)，如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'hello'|slice:-3,3</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">llo</code></li>
  <li><code class="highlighter-rouge">minus</code> - 减法运算，如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">4|minus:2</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">2</code></li>
  <li><code class="highlighter-rouge">plus</code> - 加法运算，如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'1'|plus:'1'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">2</code></li>
  <li><code class="highlighter-rouge">times</code> - 乘法运算，如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">5|times:4</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">20</code></li>
  <li><code class="highlighter-rouge">divided_by</code> - 整型除法，如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">10|divided_by:3</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">3</code></li>
  <li><code class="highlighter-rouge">round</code> - 将输入的数近似到最接近的整数或者指定小数点后面的位数(暂不支持)</li>
  <li><code class="highlighter-rouge">split</code> - 将一串字符串根据匹配模式分割成数组，如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">'a~b'|split:'~'</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">ab</code></li>
  <li><code class="highlighter-rouge">modulo</code> - 取余，如:<code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">3|modulo:2</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> #=&gt; <code class="highlighter-rouge">1</code></li>
</ul>

<h2 id="tags">Tags</h2>
<hr />
<p><code class="highlighter-rouge">tags</code>用于你的模板中的逻辑，新的标签很容易开发，因此我希望在发布这些代码以后，大家可以为标准标签库增加更多的内容。
下列是当前已经支持的标签：</p>

<ul>
  <li><strong>assign</strong> - 将一些值赋给一个变量</li>
  <li><strong>capture</strong> - 块标记，把一些文本捕捉到一个变量中</li>
  <li><strong>case</strong> - 块标记，标准的case语句</li>
  <li><strong>comment</strong> - 块标记，将一块文本作为注释</li>
  <li><strong>cycle</strong> - Cycle通常用于循环轮换值，如颜色或DOM类</li>
  <li><strong>for</strong> - 用于循环<code class="highlighter-rouge">for...loop</code></li>
  <li><strong>break</strong> - 退出for循环</li>
  <li><strong>continue</strong> - 跳过当前循环剩下语句，执行下一次循环</li>
  <li><strong>if</strong> - 标准if/else区块</li>
  <li><strong>include</strong> - 包含其他模板，对于区块化非常有效</li>
  <li><strong>raw</strong> - 暂时性的禁用标签解析</li>
  <li><strong>unless</strong> - if语句的简版</li>
</ul>

<h3 id="section-2">注释</h3>

<p>任何被包含在<code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">comment</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code>以及<code class="highlighter-rouge"><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">endcomment</span><span class="w"> </span><span class="err">%</span><span class="p">}</span></code>之间的语句被解析为注释，也就是说这些语句不会被显示出来</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">We made 1 million dollars <span class="p">{%</span><span class="w"> </span><span class="nt">comment</span><span class="w"> </span><span class="p">%}</span><span class="c"> in losses </span><span class="p">{%</span><span class="w"> </span><span class="nt">endcomment</span><span class="w"> </span><span class="p">%}</span> this year</code></pre></figure>

<p>输出的结果是：</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">We made 1 million dollars  this year</code></pre></figure>

<h3 id="raw">Raw</h3>

<p><code class="highlighter-rouge">raw</code>会暂时性的禁用对标签的解析功能。这在需要展示一些可能产生冲突的内容（如下代码中，要展示liquid语句，就需要包含在<code class="highlighter-rouge">raw</code>标签之间，否则就会被解析）时非常有用。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">{% raw %}

    In Handlebars,{{ this  }} will be HTML-eacaped, but {{{ that }}} will not.

{% endraw %}</code></pre></figure>

<h3 id="ifelse">if/else</h3>

<p><code class="highlighter-rouge">if/else</code>在其他编程语言里应该已经被熟知了。Liquid使得你可以通过<code class="highlighter-rouge">if</code>或<code class="highlighter-rouge">unless</code>(<code class="highlighter-rouge">elsif</code>和<code class="highlighter-rouge">else</code>为可选)编写简单的表达式：</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="p">%}</span>
  Hello <span class="p">{{</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

# Same as above
<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">null</span><span class="w"> </span><span class="p">%}</span>
  Hello <span class="p">{{</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'tobi'</span><span class="w"> </span><span class="p">%}</span>
  Hello tobi
<span class="p">{%</span><span class="w"> </span><span class="kr">elsif</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'bob'</span><span class="w"> </span><span class="p">%}</span>
  Hello bob
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'tobi'</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'bob'</span><span class="w"> </span><span class="p">%}</span>
  Hello tobi or bob
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'bob'</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">age</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">45</span><span class="w"> </span><span class="p">%}</span>
  Hello old bob
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">'tobi'</span><span class="w"> </span><span class="p">%}</span>
  Hello non-tobi
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

# Same as above
<span class="p">{%</span><span class="w"> </span><span class="kr">unless</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'tobi'</span><span class="w"> </span><span class="p">%}</span>
  Hello non-tobi
<span class="p">{%</span><span class="w"> </span><span class="kr">endunless</span><span class="w"> </span><span class="p">%}</span>

# Check for the size of an array
<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">payments</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">empty</span><span class="w"> </span><span class="p">%}</span>
   you never paid !
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">payments</span><span class="p">.</span><span class="nv">size</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="p">%}</span>
   you paid !
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">age</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="p">%}</span>
   Login here
<span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>
   Sorry, you are too young
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

# array = 1,2,3
<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">array</span><span class="w"> </span><span class="ow">contains</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">%}</span>
   array includes 2
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

# string = 'hello world'
<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="ow">contains</span><span class="w"> </span><span class="s1">'hello'</span><span class="w"> </span><span class="p">%}</span>
   string includes 'hello'
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<h3 id="case">Case语句</h3>

<p>如果你需要更多的条件判断，你可以使用 <code class="highlighter-rouge">case</code> 语句:</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="kr">case</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">when</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">%}</span>
        hit 1
    <span class="p">{%</span><span class="w"> </span><span class="kr">when</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">%}</span>
        hit 2 or 3
    <span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>
        ... else ...
<span class="p">{%</span><span class="w"> </span><span class="kr">endcase</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>Example:</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="kr">case</span><span class="w"> </span><span class="nv">template</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">when</span><span class="w"> </span><span class="s1">'label'</span><span class="w"> </span><span class="p">%}</span>
        // <span class="p">{{</span><span class="w"> </span><span class="nv">label</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">when</span><span class="w"> </span><span class="s1">'product'</span><span class="w"> </span><span class="p">%}</span>
        // <span class="p">{{</span><span class="w"> </span><span class="nv">product</span><span class="p">.</span><span class="nv">vendor</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">link_to_vendor</span><span class="w"> </span><span class="p">}}</span> / <span class="p">{{</span><span class="w"> </span><span class="nv">product</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>
        // <span class="p">{{</span><span class="nv">page_title</span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="kr">endcase</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<h3 id="cycle">Cycle</h3>

<p>我们常常需要在不同的颜色或类似的任务间轮流切换。Liquid 对于这样的操作有内置支持，通过使用 <code class="highlighter-rouge">cycle</code> 标签。</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">'one'</span><span class="p">,</span><span class="w"> </span><span class="s1">'two'</span><span class="p">,</span><span class="w"> </span><span class="s1">'three'</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">'one'</span><span class="p">,</span><span class="w"> </span><span class="s1">'two'</span><span class="p">,</span><span class="w"> </span><span class="s1">'three'</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">'one'</span><span class="p">,</span><span class="w"> </span><span class="s1">'two'</span><span class="p">,</span><span class="w"> </span><span class="s1">'three'</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">'one'</span><span class="p">,</span><span class="w"> </span><span class="s1">'two'</span><span class="p">,</span><span class="w"> </span><span class="s1">'three'</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>输出结果是</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">one
two
three
one</code></pre></figure>

<p>如果一组 <code class="highlighter-rouge">cycle</code> 没有命名，那默认情况下有用相同参数的会被认为是一个组。
如果你希望完全控制 <code class="highlighter-rouge">cycle</code> 组，你可以指定一个组名，这个组名甚至可以是一个变量。</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">'group 1'</span>:<span class="w"> </span><span class="s1">'one'</span><span class="p">,</span><span class="w"> </span><span class="s1">'two'</span><span class="p">,</span><span class="w"> </span><span class="s1">'three'</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">'group 1'</span>:<span class="w"> </span><span class="s1">'one'</span><span class="p">,</span><span class="w"> </span><span class="s1">'two'</span><span class="p">,</span><span class="w"> </span><span class="s1">'three'</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">'group 2'</span>:<span class="w"> </span><span class="s1">'one'</span><span class="p">,</span><span class="w"> </span><span class="s1">'two'</span><span class="p">,</span><span class="w"> </span><span class="s1">'three'</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">'group 2'</span>:<span class="w"> </span><span class="s1">'one'</span><span class="p">,</span><span class="w"> </span><span class="s1">'two'</span><span class="p">,</span><span class="w"> </span><span class="s1">'three'</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>输出结果是：</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">one
two
one
two</code></pre></figure>

<h3 id="section-3">循环</h3>

<p>Liquid 允许循环一个集合 :</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>array<span class="w"> </span><span class="p">%}</span>
    <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>而当迭代循环一个哈希表时，<code class="highlighter-rouge">item[0]</code>存放的是key，<code class="highlighter-rouge">item[1]</code>存放的是value：</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>hash<span class="w"> </span><span class="p">%}</span>
  <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">}}</span>: <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>在每次循环期间，下列的帮助变量都可用于额外的展示需要:</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">forloop.length      # =&gt; length of the entire for loop
forloop.index       # =&gt; index of the current iteration
forloop.index0      # =&gt; index of the current iteration (zero based)
forloop.rindex      # =&gt; how many items are still left?
forloop.rindex0     # =&gt; how many items are still left? (zero based)
forloop.first       # =&gt; is this the first iteration?
forloop.last        # =&gt; is this the last iteration?</code></pre></figure>

<p>你可以使用一些属性来影响接受循环中的哪项。
<code class="highlighter-rouge">limit:int</code> 使你可以限制接受的循环项个数；<code class="highlighter-rouge">offset:int</code> 可以可以让你从循环集合的第 n 项开始.</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"># array = [1,2,3,4,5,6]
<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>array<span class="w"> </span><span class="na">limit</span><span class="o">:</span><span class="mi">2</span><span class="w"> </span><span class="na">offset</span><span class="o">:</span><span class="mi">2</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
# results in 3,4</code></pre></figure>

<p>反转循环</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>collection<span class="w"> </span>reversed<span class="w"> </span><span class="p">%}</span>
    <span class="p">{{</span><span class="nv">item</span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>除了对一个已经存在的集合进行循环，你还可以定义一段范围区域内的数字进行循环。这段区域既可以通过文字也可以通过变量数定义得到:</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"># if item.quantity is 4...
<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>i<span class="w"> </span>in<span class="w"> </span>(<span class="mi">1</span>..item.quantity)<span class="w"> </span><span class="p">%}</span>
    <span class="p">{{</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
# results in 1,2,3,4</code></pre></figure>

<p>一个<code class="highlighter-rouge">for</code>循环可以通过<code class="highlighter-rouge">else</code>语句来处理当集合中不存在元素的情况：</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"># items =&gt; []
<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>items<span class="w"> </span><span class="p">%}</span>
   <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>
   There are no items!
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<h3 id="section-4">变量赋值</h3>

<p>你可以把数据存储在你自己定义的变量中，以便在输出或者其他标签中使用。创建一个变量的最简单方式是使用 <code class="highlighter-rouge">assign</code> 标签，其语法也是简单明了的：</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'freestyle'</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>t<span class="w"> </span>in<span class="w"> </span>collections.tags<span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">%}</span>
        &lt;p&gt;Freestyle!&lt;/p&gt;
    <span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>另一种常见用法是把 <code class="highlighter-rouge">true/false</code> 值赋给变量:</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="nv">freestyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>t<span class="w"> </span>in<span class="w"> </span>collections.tags<span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'freestyle'</span><span class="w"> </span><span class="p">%}</span>
        <span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="nv">freestyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">freestyle</span><span class="w"> </span><span class="p">%}</span>
    &lt;p&gt;Freestyle!&lt;/p&gt;
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>如果你希望把一系列字符串连接为一个字符串，并将其存储到变量中，你可以使用 <code class="highlighter-rouge">capture</code> 标签。这个标签是一个块级标签，它会 captures 任何在其中渲染的元素，并把捕获的值赋给给定的变量，而不是把这些值渲染在页面中。</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html">{% capture attribute_name %}{{ item.title | handleize }}-{{ i }}-color{% endcapture %}

<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"{{ attribute_name }}"</span><span class="nt">&gt;</span>Color:<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"attributes[{{ attribute_name }}]"</span> <span class="na">id=</span><span class="s">"{{ attribute_name }}"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"red"</span><span class="nt">&gt;</span>Red<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"green"</span><span class="nt">&gt;</span>Green<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"blue"</span><span class="nt">&gt;</span>Blue<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span></code></pre></figure>


        <hr>
        <p>05 Oct 2015</p>
        
            
                
                    <small><em>Post by: MetaCoder who is just a Coder Monkey!</em></small>
                
            
        
</article>


<div class="pagination clearfix">
    <div class="left">
        
        <a href="/github/2015/10/08/github-%E5%A4%9Asshkey%E7%AE%A1%E7%90%86/">‹ Next post</a>
        
    </div>
    <div class="right">
        
        <a href="/%E9%9A%8F%E6%84%9F/2015/08/30/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/">Previous post ›</a>
        
    </div>
</div>



<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'foocoder'; // Required - Replace '<example>' with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


            <script>
                $("article").fitVids();
                $('article p').each(function(i){
                    if (($(this).find('img').length) && (!$.trim($(this).text()).length))  {
                        $(this).addClass('img-only');
                    }
                    if ($.trim($(this).text()).length - $.trim($(this).find('small').text()).length == 0 && ($(this).find('img').length)){
                        $(this).removeClass('img-only');
                        $(this).addClass('img-with-source');
                    }
                });
            </script>
            <!-- FancyBox -->
            <link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.5" type="text/css" media="all" />
            <script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
            <script type="text/javascript" src="/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
            <script>
            // 给图片添加链接
            $(document).ready(function() {
              $('.img-with-source img,.img-only img').each(function () {
                var $image = $(this);
                var $imageWrapLink = $image.parent('a');

                if ($imageWrapLink.size() < 1) {
                  $imageWrapLink = $image.wrap('<a href="' + this.getAttribute('src') + '"></a>').parent('a');
                }
                $imageWrapLink.addClass('fancybox');
                if ($image.attr("alt")) {
                  $imageWrapLink.append('<div class="pic-title"><span>' + $image.attr("alt") + '</span></div>');
                  $imageWrapLink.attr("title",$image.attr("alt")); 
                };
              });
            });
            // fancybox
            $(".fancybox").fancybox({
              openEffect    : 'fade',
              closeEffect   : 'fade',
              helpers: {
                overlay: {
                  locked: false
                }
              }
            });
            </script>
        </div>
        <footer>
  <div class="inner">
    <p>Copyright © MetaCoder 2014~2016 </br> Powered by Jekyll</p>
  </div>
</footer>

        
        
            <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "//hm.baidu.com/hm.js?93c048bb9273a232e5e814272f1409b7";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
            </script>
        
    </body>
</html>
