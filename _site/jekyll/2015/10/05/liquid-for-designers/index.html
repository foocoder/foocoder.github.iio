<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>

Liquid for Designers | Meta Coder

</title>
<meta name="description" content=" Reading, Thinking, Coding">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed.xml">

<!-- include Font Awesome -->
<link rel="stylesheet" href="/font_awesome/css/font-awesome.min.css" >
<!-- include Font Awesome -->

<!-- icons -->
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<meta name="theme-color" content="#00f0ff">
<meta name="msapplication-TileColor" content="#00f0ff">
<meta name="msapplication-TileImage" content="/mstile-310x310.png">
<!-- /icons -->

<!-- og tags -->
<meta property="og:site_name" content="Meta Coder">
<meta property="og:title" content="Liquid for Designers • Meta Coder">
<meta property="og:locale" content="en">

  
    <meta property="og:image" content="http://127.0.0.1:4000/img/9.jpg">
  

<meta property="og:type" content="website">
<meta property="og:url" content="http://127.0.0.1:4000/jekyll/2015/10/05/liquid-for-designers/">
<meta property="og:description" content="

Reading, Thinking, Coding
">
<!-- /og tags -->

<script src="/js/jquery-2.1.4.min.js"></script>
<script src="/js/modernizr.js"></script>
<script src="/js/fitvids.js"></script>
<script>
$("#back-top").hide();
$(document).ready(function () {
  $(window).scroll(function () {
    if ($(this).scrollTop() > 100) {
      $('#back-top').fadeIn();
    } else {
      $('#back-top').fadeOut();
    }
  });
  $('#back-top a').click(function () {
    $('body,html').animate({
      scrollTop: 0
    }, 800);
    return false;
  });
});
</script>
<link href='//fonts.useso.com/css?family=Source+Code+Pro:400,700|Source+Sans+Pro:600,900|Open+Sans:400,600' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/reset.css">
<link rel="stylesheet" href="/css/pygments.css">

    <link rel="stylesheet" href="/font_awesome/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/style.css">
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]-->


<style>
header {
  margin-bottom: 40px;
}
@media all and (min-width: 500px) {
  header {
    margin-bottom: 100px;
  }
}
header::after {
  display: none;
}
</style>


    </head>
    <body>
        
        <div class="cover-image-container">
            <img alt="Cover image" src="/img/covers/9.jpg" style="width:100%">
        </div>
        
        
        <div id="back-top" style="display:none">
          <a href="#top" title="回到顶部">
              <span class="fa fa-stack fa-lg">
                  <i class="fa fa-square fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-arrow-up fa-inverse"></i>
              </span>
          </a>
        </div>
        
        <div class="wrap">
            <header>
    <div class="website-title">
  <a href="/">
    
      <img alt="Meta Coder" src="/img/logo1.png" style="height:100%">
    

  </a>
  <nav>
  <a href="/about/">ABOUT</a>
  <a href="/archive/">ARCHIVE</a>
  <a href="/category/">CATEGORY</a>
  <a href="/tags/">TAGS</a>
  <a href="/reading/">BOOK</a>
</nav>

  </div>
  
</header>

            

    


<article>
        <h1>Liquid for Designers</h1>
        <div class="category">
            
                <a class="fa fa-coffee" style="font-size:large" href="/category/#jekyll" title="jekyll"> Jekyll</a>
            
        </div>
        <div class="tags">
            
            <a class="fa fa-thumb-tack" style="font-size:large" href="/tags/#转载" title="转载">  转载</a>
            
            <a class="fa fa-thumb-tack" style="font-size:large" href="/tags/#译文" title="译文">  译文</a>
            
            <a class="fa fa-thumb-tack" style="font-size:large" href="/tags/#Liquid" title="Liquid">  Liquid</a>
            
            <a class="fa fa-thumb-tack" style="font-size:large" href="/tags/#不时之需" title="不时之需">  不时之需</a>
            
        </div>
        <div class="times">
            <span class="fa fa-calendar"style="font-size:large" > Oct 5, 2015 • 10&nbsp;min read</span>
        </div>

        <hr>
        <p>这两天在用jekyll搭博客,一看是liquid语言立刻傻眼了!</p>

<p>话说Liquid是个什么鬼?</p>

<p>不过好在Github上有<a href="http://github.com/Shopify/liquid/wiki/Liquid-for-Designers">文档</a>, 但是可惜是英语的.虽说作为一个Code Monkey来说,英语应该作为第二母语来使用,但我还是尽我所能的去寻找第一母语吧.</p>

<p>功夫不负有心人,让我找到了 <a href="http://havee.me">@Havee</a>的这篇<a href="http://havee.me/internet/2013-11/jekyll-liquid-designer.html">Jekyll扩展的Liquid设计</a>,虽然这篇也是转自<a href="http://yanshasha.com/2013/01/22/Liquid-for-designers/">http://yanshasha.com/2013/01/22/Liquid-for-designers/</a>,不过可惜原文已挂,为了防止这么好的母语翻译文档继续挂掉,so,我还是转过来吧,以备不时之需.</p>

<blockquote><p><center>原文:Jekyll扩展的Liquid设计</center></p></blockquote>

<p>在Liquid中有两种类型的标记:<code>Output</code>和<code>Tag</code>.</p>

<ul>
<li><code>Output</code>标记(有些可能解析文本)被包含在:</li>
</ul>


<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{{</span><span class="w"> </span><span class="err">两个配对的花括号中</span><span class="w"> </span><span class="p">}}</span></code></pre></div>


<ul>
<li><code>Tag</code>标记(不能被解析文本)被包含在:</li>
</ul>


<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">成对的花括号和百分号中</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<h2>Output</h2>

<hr />

<p>下面是关于输出标记的简单实例:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">Hello <span class="p">{{</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">}}</span>
Hello <span class="p">{{</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="p">}}</span>
Hello <span class="p">{{</span><span class="w"> </span><span class="s1">&#39;tobi&#39;</span><span class="w"> </span><span class="p">}}</span></code></pre></div>


<h3>高级输入:过滤器</h3>

<p>输入标记带有过滤器,方法很简单.第一个参数总是过滤器左边值的输出.当下个过滤器运行时,刚刚所得到的过滤器的返回值就会成为新的左边值.知道最后没有过滤器时,模板就会接受最后的结果字符串.</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">Hello <span class="p">{{</span><span class="w"> </span><span class="s1">&#39;tobi&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">upcase</span><span class="w"> </span><span class="p">}}</span>
Hello tobi has <span class="p">{{</span><span class="w"> </span><span class="s1">&#39;tobi&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">size</span><span class="w"> </span><span class="p">}}</span><span class="w"> </span><span class="nf">letters</span><span class="w"></span>
Hello<span class="w"> </span>{{<span class="w"> </span><span class="s1">&#39;tobi&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">capitalize</span><span class="w"> </span><span class="p">}}</span>
Hello <span class="p">{{</span><span class="w"> </span><span class="s1">&#39;1982-02-01&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">date</span><span class="p">:</span><span class="s2">&quot;%Y&quot;</span><span class="w"> </span><span class="p">}}</span></code></pre></div>


<p>输出的结果是:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">Hello TOBI
Hello tobi has 4 letters
Hello Tobi
Hello 1982</code></pre></div>


<h3>标准过滤器</h3>

<ul>
<li><code>data</code> - 格式化日期</li>
<li><code>capitalize</code> - 将输入语句的首字母大写</li>
<li><code>downcase</code> - 将输入字符串转为小写</li>
<li><code>upcase</code> - 将输入字符串转为大写</li>
<li><code>first</code> - 获取传递数组的第一个元素</li>
<li><code>last</code> - 获取传递数组的最后一个元素</li>
<li><code>join</code> - 将数组中元素连成一串,中间通过某些字符分隔</li>
<li><code>sort</code> - 对数组元素进行排序</li>
<li><code>map</code> - 从一个给定属性中映射/收集一个数组</li>
<li><code>size</code> - 返回一个数组或字符串的大小</li>
<li><code>escape</code> - 对一串字符串进行编码</li>
<li><code>escape_once</code> - 返回一个转义的html版本,而不影响现有的转义文本</li>
<li><code>strip_html</code> - 去除一串字符串中的所有html标签</li>
<li><code>strip_newlines</code> - 从字符串中去除所有换行符(\n)</li>
<li><code>newline_to_br</code> - 将所有的换行符(\n)换成html的换行标记</li>
<li><code>replace</code> - 替换每一处匹配字符串,如:<code>{{ 'foofoo'|replace:'foo','bar' }}</code> #=> <code>barbar</code></li>
<li><code>replace_first</code> - 替换第一处匹配字符串,如:<code>{{ 'barbar'|replace_first:'bar','foo' }}</code> #=> <code>foobar</code></li>
<li><code>remove</code> - 删除每一处匹配的字符串,如:<code>{{ 'foobarfoobar'|remove:'foo' }}</code> #=> <code>barbar</code></li>
<li><code>remove_first</code> - 删除第一处匹配的字符串，如:<code>{{ 'barbar'|remove_first:'bar' }}</code> #=> <code>bar</code></li>
<li><code>truncate</code> - 将一串字符串截断其前x个字符,而且，也可以在第二个参数上来为其追加字符，如: <code>{{ 'foobarfoobar'|truncate:5,'.' }}</code> #=> <code>foob.</code></li>
<li><code>truncatewords</code> - 将一串字符串截断其前x个单词</li>
<li><code>prepend</code> - 在一串字符串前添加指定字符串,如:<code>{{ 'bar'|prepend:'foo' }}</code> #=> <code>foobar</code></li>
<li><code>append</code> - 在一串字符串后添加指定字符串，如:<code>{{ 'foo'|append:'bar' }}</code> #=> <code>foobar</code></li>
<li><code>slice</code> - 切割字符串，需要输入切割位置以及切割长度(暂不支持)，如:<code>{{ 'hello'|slice:-3,3 }}</code> #=> <code>hello</code></li>
<li><code>minus</code> - 减法运算，如:<code>{{ 4|minus:2 }}</code> #=> <code>2</code></li>
<li><code>plus</code> - 加法运算，如:<code>{{ '1'|plus:'1' }}</code> #=> <code>2</code></li>
<li><code>times</code> - 乘法运算，如:<code>{{ 5|times:4 }}</code> #=> <code>20</code></li>
<li><code>divided_by</code> - 整型除法，如:<code>{{ 10|divided_by:3 }}</code> #=> <code>3</code></li>
<li><code>round</code> - 将输入的数近似到最接近的整数或者指定小数点后面的位数(暂不支持)</li>
<li><code>split</code> - 将一串字符串根据匹配模式分割成数组，如:<code>{{ 'a~b'|split:'~' }}</code> #=> <code>ab</code></li>
<li><code>modulo</code> - 取余，如:<code>{{ 3|modulo:2 }}</code> #=> <code>1</code></li>
</ul>


<h2>Tags</h2>

<hr />

<p><code>tags</code>用于你的模板中的逻辑，新的标签很容易开发，因此我希望在发布这些代码以后，大家可以为标准标签库增加更多的内容。
下列是当前已经支持的标签：</p>

<ul>
<li><strong>assign</strong> - 将一些值赋给一个变量</li>
<li><strong>capture</strong> - 块标记，把一些文本捕捉到一个变量中</li>
<li><strong>case</strong> - 块标记，标准的case语句</li>
<li><strong>comment</strong> - 块标记，将一块文本作为注释</li>
<li><strong>cycle</strong> - Cycle通常用于循环轮换值，如颜色或DOM类</li>
<li><strong>for</strong> - 用于循环<code>for...loop</code></li>
<li><strong>break</strong> - 退出for循环</li>
<li><strong>continue</strong> - 跳过当前循环剩下语句，执行下一次循环</li>
<li><strong>if</strong> - 标准if/else区块</li>
<li><strong>include</strong> - 包含其他模板，对于区块化非常有效</li>
<li><strong>raw</strong> - 暂时性的禁用标签解析</li>
<li><strong>unless</strong> - if语句的简版</li>
</ul>


<h3>注释</h3>

<p>任何被包含在<code>{% comment %}</code>以及<code>{% endcomment %}</code>之间的语句被解析为注释，也就是说这些语句不会被显示出来</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">We made 1 million dollars <span class="p">{%</span><span class="w"> </span><span class="nt">comment</span><span class="w"> </span><span class="p">%}</span><span class="c"> in losses </span><span class="p">{%</span><span class="w"> </span><span class="nt">endcomment</span><span class="w"> </span><span class="p">%}</span> this year</code></pre></div>


<p>输出的结果是：</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">We made 1 million dollars  this year</code></pre></div>


<h3>Raw</h3>

<p><code>raw</code>会暂时性的禁用对标签的解析功能。这在需要展示一些可能产生冲突的内容（如下代码中，要展示liquid语句，就需要包含在<code>raw</code>标签之间，否则就会被解析）时非常有用。</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">{% raw %}

    In Handlebars,{{ this  }} will be HTML-eacaped, but {{{ that }}} will not.

{% endraw %}</code></pre></div>


<h3>if/else</h3>

<p><code>if/else</code>在其他编程语言里应该已经被熟知了。Liquid使得你可以通过<code>if</code>或<code>unless</code>(<code>elsif</code>和<code>else</code>为可选)编写简单的表达式：</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="p">%}</span>
  Hello <span class="p">{{</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

# Same as above
<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">null</span><span class="w"> </span><span class="p">%}</span>
  Hello <span class="p">{{</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;tobi&#39;</span><span class="w"> </span><span class="p">%}</span>
  Hello tobi
<span class="p">{%</span><span class="w"> </span><span class="kr">elsif</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;bob&#39;</span><span class="w"> </span><span class="p">%}</span>
  Hello bob
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="err">==</span><span class="w"> </span><span class="s1">&#39;tobi&#39;</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;bob&#39;</span><span class="w"> </span><span class="p">%}</span>
  Hello tobi or bob
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="err">==</span><span class="w"> </span><span class="s1">&#39;bob&#39;</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">age</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">45</span><span class="w"> </span><span class="p">%}</span>
  Hello old bob
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">&#39;tobi&#39;</span><span class="w"> </span><span class="p">%}</span>
  Hello non-tobi
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

# Same as above
<span class="p">{%</span><span class="w"> </span><span class="kr">unless</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;tobi&#39;</span><span class="w"> </span><span class="p">%}</span>
  Hello non-tobi
<span class="p">{%</span><span class="w"> </span><span class="kr">endunless</span><span class="w"> </span><span class="p">%}</span>

# Check for the size of an array
<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">payments</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">empty</span><span class="w"> </span><span class="p">%}</span>
   you never paid !
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">payments</span><span class="p">.</span><span class="nv">size</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="p">%}</span>
   you paid !
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">user</span><span class="p">.</span><span class="nv">age</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="p">%}</span>
   Login here
<span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>
   Sorry, you are too young
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

# array = 1,2,3
<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">array</span><span class="w"> </span><span class="ow">contains</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">%}</span>
   array includes 2
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>

# string = &#39;hello world&#39;
<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="ow">contains</span><span class="w"> </span><span class="s1">&#39;hello&#39;</span><span class="w"> </span><span class="p">%}</span>
   string includes &#39;hello&#39;
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<h3>Case语句</h3>

<p>如果你需要更多的条件判断，你可以使用 <code>case</code> 语句:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="kr">case</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">when</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">%}</span>
        hit 1
    <span class="p">{%</span><span class="w"> </span><span class="kr">when</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">%}</span>
        hit 2 or 3
    <span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>
        ... else ...
<span class="p">{%</span><span class="w"> </span><span class="kr">endcase</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<p>Example:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="kr">case</span><span class="w"> </span><span class="nv">template</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">when</span><span class="w"> </span><span class="s1">&#39;label&#39;</span><span class="w"> </span><span class="p">%}</span>
        // <span class="p">{{</span><span class="w"> </span><span class="nv">label</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">when</span><span class="w"> </span><span class="s1">&#39;product&#39;</span><span class="w"> </span><span class="p">%}</span>
        // <span class="p">{{</span><span class="w"> </span><span class="nv">product</span><span class="p">.</span><span class="nv">vendor</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">link_to_vendor</span><span class="w"> </span><span class="p">}}</span><span class="w"> </span><span class="nf">/</span><span class="w"> </span>{{<span class="w"> </span>product.title<span class="w"> </span><span class="p">}}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>
        // <span class="p">{{</span><span class="nv">page_title</span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="kr">endcase</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<h3>Cycle</h3>

<p>我们常常需要在不同的颜色或类似的任务间轮流切换。Liquid 对于这样的操作有内置支持，通过使用 <code>cycle</code> 标签。</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;three&#39;</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;three&#39;</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;three&#39;</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;three&#39;</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<p>输出结果是</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">one
two
three
one</code></pre></div>


<p>如果一组 <code>cycle</code> 没有命名，那默认情况下有用相同参数的会被认为是一个组。
如果你希望完全控制 <code>cycle</code> 组，你可以指定一个组名，这个组名甚至可以是一个变量。</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">&#39;group 1&#39;</span>:<span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;three&#39;</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">&#39;group 1&#39;</span>:<span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;three&#39;</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">&#39;group 2&#39;</span>:<span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;three&#39;</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">cycle</span><span class="w"> </span><span class="s1">&#39;group 2&#39;</span>:<span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;three&#39;</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<p>输出结果是：</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">one
two
one
two</code></pre></div>


<h3>循环</h3>

<p>Liquid 允许循环一个集合 :</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>array<span class="w"> </span><span class="p">%}</span>
    <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<p>而当迭代循环一个哈希表时，<code>item[0]</code>存放的是key，<code>item[1]</code>存放的是value：</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>hash<span class="w"> </span><span class="p">%}</span>
  <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="err">[</span><span class="mi">0</span><span class="err">]</span><span class="w"> </span><span class="p">}}</span>: <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="err">[</span><span class="mi">1</span><span class="err">]</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<p>在每次循环期间，下列的帮助变量都可用于额外的展示需要:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">forloop.length      # =&gt; length of the entire for loop
forloop.index       # =&gt; index of the current iteration
forloop.index0      # =&gt; index of the current iteration (zero based)
forloop.rindex      # =&gt; how many items are still left?
forloop.rindex0     # =&gt; how many items are still left? (zero based)
forloop.first       # =&gt; is this the first iteration?
forloop.last        # =&gt; is this the last iteration?</code></pre></div>


<p>你可以使用一些属性来影响接受循环中的哪项。
<code>limit:int</code> 使你可以限制接受的循环项个数；<code>offset:int</code> 可以可以让你从循环集合的第 n 项开始.</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"># array = [1,2,3,4,5,6]
<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>array<span class="w"> </span><span class="na">limit</span><span class="o">:</span><span class="mi">2</span><span class="w"> </span><span class="na">offset</span><span class="o">:</span><span class="mi">2</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
# results in 3,4</code></pre></div>


<p>反转循环</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>collection<span class="w"> </span>reversed<span class="w"> </span><span class="p">%}</span>
    <span class="p">{{</span><span class="nv">item</span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<p>除了对一个已经存在的集合进行循环，你还可以定义一段范围区域内的数字进行循环。这段区域既可以通过文字也可以通过变量数定义得到:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"># if item.quantity is 4...
<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>i<span class="w"> </span>in<span class="w"> </span>(<span class="mi">1</span>..item.quantity)<span class="w"> </span><span class="p">%}</span>
    <span class="p">{{</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
# results in 1,2,3,4</code></pre></div>


<p>一个<code>for</code>循环可以通过<code>else</code>语句来处理当集合中不存在元素的情况：</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"># items =&gt; []
<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>item<span class="w"> </span>in<span class="w"> </span>items<span class="w"> </span><span class="p">%}</span>
   <span class="p">{{</span><span class="w"> </span><span class="nv">item</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>
   There are no items!
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<h3>变量赋值</h3>

<p>你可以把数据存储在你自己定义的变量中，以便在输出或者其他标签中使用。创建一个变量的最简单方式是使用 <code>assign</code> 标签，其语法也是简单明了的：</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;freestyle&#39;</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>t<span class="w"> </span>in<span class="w"> </span>collections.tags<span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">%}</span>
        &lt;p&gt;Freestyle!&lt;/p&gt;
    <span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<p>另一种常见用法是把 <code>true/false</code> 值赋给变量:</p>

<div class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="na">freestyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span>t<span class="w"> </span>in<span class="w"> </span>collections.tags<span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;freestyle&#39;</span><span class="w"> </span><span class="p">%}</span>
        <span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="na">freestyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>

<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">freestyle</span><span class="w"> </span><span class="p">%}</span>
    &lt;p&gt;Freestyle!&lt;/p&gt;
<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span></code></pre></div>


<p>如果你希望把一系列字符串连接为一个字符串，并将其存储到变量中，你可以使用 <code>capture</code> 标签。这个标签是一个块级标签，它会 captures 任何在其中渲染的元素，并把捕获的值赋给给定的变量，而不是把这些值渲染在页面中。</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">{% capture attribute_name %}{{ item.title | handleize }}-{{ i }}-color{% endcapture %}

<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;{{ attribute_name }}&quot;</span><span class="nt">&gt;</span>Color:<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">&quot;attributes[{{ attribute_name }}]&quot;</span> <span class="na">id=</span><span class="s">&quot;{{ attribute_name }}&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;red&quot;</span><span class="nt">&gt;</span>Red<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;green&quot;</span><span class="nt">&gt;</span>Green<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>Blue<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span></code></pre></div>




        <hr>
        <p>05 Oct 2015</p>
        
            
                
                    <small><em>Post by: MetaCoder who is just a Coder Monkey!</em></small>
                
            
        
</article>


<div class="pagination clearfix">
    <div class="left">
        
        <a href="/github/2015/10/08/github-%E5%A4%9Asshkey%E7%AE%A1%E7%90%86/">‹ Next post</a>
        
    </div>
    <div class="right">
        
        <a href="/%E9%9A%8F%E6%84%9F/2015/08/30/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/">Previous post ›</a>
        
    </div>
</div>



<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'foocoder'; // Required - Replace '<example>' with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


            <script>
                $("article").fitVids();
                $('article p').each(function(i){
                    if (($(this).find('img').length) && (!$.trim($(this).text()).length))  {
                        $(this).addClass('img-only');
                    }
                    if ($.trim($(this).text()).length - $.trim($(this).find('small').text()).length == 0 && ($(this).find('img').length)){
                        $(this).addClass('img-only-source');
                    }
                });
            </script>
        </div>
        <footer>
  <div class="inner">
    <p>This is the footer.<br><a href="http://steinvc.github.io/holo-alfa/">Holo Alfa</a> Jekyll theme crafted by <a href="http://steinvc.github.io/holo-alfa/">Stijn</a>.</p>
  </div>
</footer>

        
        
            <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "//hm.baidu.com/hm.js?93c048bb9273a232e5e814272f1409b7";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
            </script>
        
    </body>
</html>
